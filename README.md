# Solis Client

## Usage

```text
usage: main.py [-h] [-t TOKEN] [-f] [-fk] [-k] [-a ASSET_MODE] [-o] [--kvauth KVAUTH] [--kvurl KVURL] [--venus]

options:
  -h, --help            show this help message and exit
  -t TOKEN, --token TOKEN
                        Your firebase refreshToken.
  -f, --force           Update databases without checking version.
  -fk, --force-kv       Put databases without checking version.
  -k, --kv              Notify KV server.
  -a ASSET_MODE, --asset-mode ASSET_MODE
                        Enable asset decryption mode. Can be either (all | diff).
  -o, --overwrite       Overwrite cached token. If '--token' does not exist, this argument takes no effect.
  --kvauth KVAUTH       KV server auth token.
  --kvurl KVURL         KV server endpoint.
  --venus               Check and update(if needed) hoshimi-venus databases.
```

- `--token`: **Must be given at first running**, can be omitted if `refreshToken` in `cache/client_cache.json` it not empty. If they both exist, the one in `client_cache.json` will be used first.
- `-k, --kvauth, --kvurl`: All **must be present at the same time**, otherwise they will be ignored.

## Updating

If API has been updated, take the following steps to keep client proto schema up-to-date with the server.

0. Back up your files to avoid unexpected overrides.

1. Move `dump.cs` generated by il2cppdumper to `cache/` folder.

2. Run `gen_proto.bat` to generate python code.

3. Copy generated files `cache/Proto*` into root directory.
